# üìã –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –≤ Docker –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
sqlite3.OperationalError: unable to open database file
```

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **Dockerfile** (–æ–±–Ω–æ–≤–ª–µ–Ω)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `appuser` (UID 1000)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `docker-entrypoint.sh` –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `utils.py` (–±—ã–ª –ø—Ä–æ–ø—É—â–µ–Ω)

### 2. **docker-compose.yml** (–æ–±–Ω–æ–≤–ª–µ–Ω)
- ‚úÖ Volume –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥ `.:/app`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user: "1000:1000"`
- ‚úÖ –¢–µ–ø–µ—Ä—å session —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 3. **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `docker-entrypoint.sh` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `first-auth.sh` - —É–¥–æ–±–Ω–∞—è –ø–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `DOCKER_FIX.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ `QUICKFIX.md` - –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 4. **deploy.sh** (–æ–±–Ω–æ–≤–ª–µ–Ω)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å –ø—Ä–∞–≤–∞–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è session —Ñ–∞–π–ª–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 5. **Makefile** (–æ–±–Ω–æ–≤–ª–µ–Ω)
- ‚úÖ `make docker-auth` - –ø–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `make git-push` - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GitHub
- ‚úÖ `make deploy SERVER=user@ip` - –¥–µ–ø–ª–æ–π
- ‚úÖ `make backup-create` - –±—ç–∫–∞–ø
- ‚úÖ `make fix-permissions` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å:

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
cp env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ

# 2. –ü–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
make docker-auth
# –∏–ª–∏: bash first-auth.sh

# 3. –ó–∞–ø—É—Å–∫
make docker-up
# –∏–ª–∏: docker-compose up -d
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ):
```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
scp Dockerfile docker-compose.yml docker-entrypoint.sh first-auth.sh user@server:/opt/telegram-post-copier/

# 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh user@server
cd /opt/telegram-post-copier
docker-compose down
docker-compose build --no-cache
make fix-permissions  # –∏–ª–∏: chmod 777 temp logs processed_images
bash first-auth.sh  # –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
docker-compose up -d
```

### –ù–æ–≤—ã–π –¥–µ–ø–ª–æ–π:
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
make deploy SERVER=root@your_server_ip
# –∏–ª–∏: bash deploy.sh root@your_server_ip

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
ssh root@your_server_ip
cd /opt/telegram-post-copier
bash first-auth.sh
docker-compose up -d
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –°—Ç–∞—Ç—É—Å
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫: ...
# ‚úÖ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–∞–Ω–∞–ª: ...
# ‚úÖ –¶–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª: ...
# üîÅ –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```

## üéØ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ GitHub: `make git-push`
2. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø: `make backup-create`
3. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä: `make deploy SERVER=user@ip`

